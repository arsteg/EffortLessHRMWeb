<div class="container-fluid selectdate">
  <div class=" d-flex mt-5">
    <div class="">
      <div class="input-group date-style">
        <input type='button' value='<' name='prev' (click)="SetPreviousDay()" />
        <input type="date" name="date" id="date" class="form-control" [(ngModel)]="selectedDate"
          (change)="showScreenShots()" />
        <input type='button' value='>' name='next' (click)="SetNextDay()" [disabled]="DisableNext()" />
      </div>
    </div>
    <div class=" pt-1 d-flex text-center mx-4">
      <label for="member" class="pt-2 pe-3">Member</label>
   <select id="member" name="member" class="form-control" class="form-select form-select-sm"
        aria-label=".form-select-sm example">
        <option *ngFor="let m of members" value="{{m|json}}">{{m.name}}</option>
      </select>
    </div>

   
    <div class="text-center pt-1 mx-4">
      <label>Total time: {{padValue(totalHours)}} h {{padValue(totalMinutes)}} m</label>
    </div>
    <div class="pt-1">
      <label>This week: {{padValue(currentWeekTotalHours)}} h {{padValue(currentWeekTotalMinutes)}} m</label>
    </div>
    <div class="pt-1 mx-4">
      <label>This month: {{padValue(currentMonthTotalHours)}} h {{padValue(currentMonthTotalMinutes)}} m</label>
    </div>
    <div class="mx-4">
      <button mat-raised-button color="accent"  id="btnRefresh" (click)="showScreenShots()">Refresh</button>
        </div>
   
  </div>
 
 <hr>

  <div *ngFor="let timeLog of screenshotRows; let index = index " class="row">

    <div class="col-sm-2">
      <figure>
        <img *ngIf="timeLog?.col1?.fileString" src="{{'data:image/jpg;base64,' + timeLog.col1.fileString}}"
          data-bs-toggle="modal" data-bs-target="#bigImageModal" (click)="setSelectedScreenshot($event)" />
        <img *ngIf="!timeLog?.col1?.fileString" src="{{'data:image/jpeg;base64,'+defaultScreenshot}}" />
        <figcaption class="figure-caption text-center" 
          [tooltip]="'Clicks: ' + (timeLog.col1.clicks || 0) + ', Keyboard: '+ (timeLog.col1.keysPressed || 0)"
          [style.background-color]="getActivityColor(timeLog.col1.GetActivityLevel)">{{timeLog.col1.timeLabel}}
        </figcaption>
      </figure>
    </div>

    <div class="col-sm-2" >
      <figure>
        <img *ngIf="timeLog?.col2?.fileString" src="{{'data:image/jpg;base64,' + timeLog.col2.fileString}}" data-bs-toggle="modal"
          data-bs-target="#bigImageModal" (click)="setSelectedScreenshot($event)" />
          <img *ngIf="!timeLog?.col2?.fileString" src="{{'data:image/jpeg;base64,'+defaultScreenshot}}" />
        <figcaption class="figure-caption text-center"
        [tooltip]="'Clicks: ' + (timeLog.col2.clicks || 0) + ', Keyboard: '+ (timeLog.col2.keysPressed || 0)"
          [style.background-color]="getActivityColor(timeLog?.col2?.GetActivityLevel)">{{timeLog.col2.timeLabel}}
        </figcaption>
      </figure>
    </div>
    
    <div class="col-sm-2" >
      <figure>
        <img *ngIf="timeLog?.col3?.fileString" src="{{'data:image/jpg;base64,' + timeLog.col3.fileString}}" data-bs-toggle="modal"
          data-bs-target="#bigImageModal" (click)="setSelectedScreenshot($event)" />
          <img *ngIf="!timeLog?.col3?.fileString" src="{{'data:image/jpeg;base64,'+defaultScreenshot}}" />
        <figcaption class="figure-caption text-center"
        [tooltip]="'Clicks: ' + (timeLog.col3.clicks || 0) + ', Keyboard: '+ (timeLog.col3.keysPressed || 0)"
          [style.background-color]="getActivityColor(timeLog?.col3?.GetActivityLevel)">{{timeLog?.col3?.timeLabel}}
        </figcaption>
      </figure>
    </div>
    
    <div class="col-sm-2">
      <figure>
        <img *ngIf="timeLog?.col4?.fileString" src="{{'data:image/jpg;base64,' + timeLog.col4.fileString}}" data-bs-toggle="modal"
          data-bs-target="#bigImageModal" (click)="setSelectedScreenshot($event)" />
          <img *ngIf="!timeLog?.col4?.fileString" src="{{'data:image/jpeg;base64,'+defaultScreenshot}}" />
        <figcaption class="figure-caption text-center"
        [tooltip]="'Clicks: ' + (timeLog.col4.clicks || 0) + ', Keyboard: '+ (timeLog.col4.keysPressed || 0)"
          [style.background-color]="getActivityColor(timeLog?.col4?.GetActivityLevel)">{{timeLog?.col4?.timeLabel}}
        </figcaption>
      </figure>
    </div>
    
    <div class="col-sm-2" >
      <figure>
        <img  *ngIf="timeLog?.col5?.fileString" src="{{'data:image/jpg;base64,' + timeLog.col5.fileString}}" data-bs-toggle="modal"
          data-bs-target="#bigImageModal" (click)="setSelectedScreenshot($event)" />
          <img *ngIf="!timeLog?.col5?.fileString" src="{{'data:image/jpeg;base64,'+defaultScreenshot}}" />
        <figcaption class="figure-caption text-center"
        [tooltip]="'Clicks: ' + (timeLog.col5.clicks || 0) + ', Keyboard: '+ (timeLog.col5.keysPressed || 0)"
          [style.background-color]="getActivityColor(timeLog?.col5?.GetActivityLevel)">{{timeLog.col5.timeLabel}}
        </figcaption>
      </figure>
    </div>
    
    <div class="col-sm-2">
      <figure>
        <img *ngIf="timeLog?.col6?.fileString" src="{{'data:image/jpg;base64,' + timeLog.col6.fileString}}" data-bs-togglze="modal"
          data-bs-target="#bigImageModal" (click)="setSelectedScreenshot($event)" />
          <img *ngIf="!timeLog?.col6?.fileString" src="{{'data:image/jpeg;base64,'+ defaultScreenshot}}" />
        <figcaption class="figure-caption text-center"
        [tooltip]="'Clicks: ' + (timeLog.col6.clicks || 0) + ', Keyboard: '+ (timeLog.col6.keysPressed || 0)"
          [style.background-color]="getActivityColor(timeLog?.col6?.GetActivityLevel)">{{timeLog.col6.timeLabel}}
        </figcaption>
      </figure>
    </div>
    
  </div>


</div>

<div class="modal fade" role="dialog" id="bigImageModal" tabindex="0" aria-labelledby="bigImageModalLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-xl">
    <div class="modal-content">
      <div class="modal-body">
        <div class="row">
          <div class="col-sm-12">
            <div class="row">
              <div class="col-sm-12">
                <div class="carousel-item active">
                  <img class="modal-image" src="{{selectedScreenShot}}" />
                </div>
                <a class="carousel-control-prev" href="#demo" data-slide="prev">
                  <span class="carousel-control-prev-icon" (click)=SetPreviousScreen()></span>
                </a>
                <a class="carousel-control-next" href="#demo" data-slide="next">
                  <span class="carousel-control-next-icon" (click)="SetNextScreen()"></span>
                </a>
              </div>
            </div>
            <!-- <div class="row">
              <div class="col-sm-1">
                <button (click)=SetPreviousScreen()>BACK</button>
              </div>
              <div class="col-sm-10">
              </div>
              <div class="col-sm-1 bottompmNav">
                <button (click)="SetNextScreen()">NEXT</button>
              </div>
            </div> -->
          </div>
        </div>
      </div>
    </div>
  </div>
</div>