<div class="pt-4">
    <div class="bg-white mt-0 py-2 px-3">
        <form [formGroup]="leaveBalanceForm" (ngSubmit)="getLeaveBalance()">
            <div class="row m-0">
                <ng-container *ngIf="portalView == 'admin'">
                    <div class="form-group col-md-3">
                        <mat-form-field class="w-100">
                            <mat-label>{{ 'leave.selectEmployee' | translate }}</mat-label>
                            <mat-select name="users" formControlName="user">
                                <mat-option *ngFor="let member of users" [value]="member.id" (click)="selecteduser(member.id)">
                                    {{ member?.name | titlecase }}
                                </mat-option>
                            </mat-select>
                            <mat-error *ngIf="leaveBalanceForm.get('user')?.invalid && (leaveBalanceForm.get('user')?.touched || leaveBalanceForm.get('user')?.dirty)">
                                {{ error | translate }}
                            </mat-error>
                        </mat-form-field>
                    </div>
                </ng-container>
                <ng-container *ngIf="portalView == 'user' && extractedUrl == 'my-team-balance'">
                    <div class="form-group col-md-3">
                        <mat-form-field class="w-100">
                            <mat-label>{{ 'leave.selectTeamMember' | translate }}</mat-label>
                            <mat-select id="user" name="user" formControlName="user">
                                <mat-option *ngFor="let m of users" [value]="m.id" (click)="selecteduser(m.id)">
                                    {{ m.name | titlecase }}
                                </mat-option>
                            </mat-select>
                            <mat-error *ngIf="leaveBalanceForm.get('user')?.invalid && (leaveBalanceForm.get('user')?.touched || leaveBalanceForm.get('user')?.dirty)">
                                {{ error | translate }}
                            </mat-error>
                        </mat-form-field>
                    </div>
                </ng-container>

                <div class="form-group col-md-3">
                    <mat-form-field class="w-100">
                        <mat-label>{{ 'leave.selectLeaveCycle' | translate }}</mat-label>
                        <mat-select formControlName="cycle">
                            <mat-option *ngFor="let year of years" [value]="year.value">
                                {{ year.label }}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>

                <div class="form-group col-md-3">
                    <mat-form-field class="w-100">
                        <mat-label>{{ 'leave.selectLeaveCategory' | translate }}</mat-label>
                        <mat-select formControlName="category">
                            <mat-option *ngFor="let category of leaveCategories" [value]="category?.leaveCategory?._id">
                                {{ category?.leaveCategory?.label | titlecase }}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>
            </div>
            <div class="row m-0">
                <div class="col-12 mt-2">
                    <hrm-table 
                        [data]="leaveBalance" 
                        [isServerSide]="false" 
                        [columns]="columns" 
                        [showExport]="'none'" 
                        [showSearch]="false" 
                        [totalItems]="totalRecords"
                    >
                    </hrm-table>
                </div>
            </div>
        </form>
    </div>
</div>
