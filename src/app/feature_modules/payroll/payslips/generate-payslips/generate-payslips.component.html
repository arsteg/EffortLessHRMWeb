<div class="payslip-detail">
    <div class="d-flex justify-content-between">
        <button class="backBtn" mat-raised-button (click)="close.emit()">{{'payroll.back' | translate}}</button>
        <h2 translate>payroll.generated_salary_slip</h2>
        <button color="primary" mat-raised-button (click)="downloadPDF()">{{'payroll.download' | translate}}</button>
    </div>
    <div id="payslipContainer" #payslipContainer class="container bg-white py-5 px-4">
        <div class="d-flex justify-content-between align-items-center mb-5">
            <span>
                <img class="w-50" src="assets/images/company-logo.jpg" alt="">
            </span>
            <div class="">
                <label for="company-name" class="fw-bold">{{getCompanyNameFromCookies()}}</label><br>
                <label for="" translate>payroll.company_address</label>
            </div>
        </div>

        <div class="row mb-4">
            <div class="col-3">
                <span class="fw-bold" translate>payroll.date_of_joining</span><br>
                <span class="fw-bold" translate>payroll.pay_period</span><br>
                <span class="fw-bold" translate>payroll.gross_pay</span><br>
                <span class="fw-bold" translate>payroll.payable_days</span><br>
            </div>
            <div class="col-3">
                <span>05 Dec, 2022</span><br>
                <span>{{payslip?.PayrollUser?.payroll?.month}}, {{payslip?.PayrollUser?.payroll?.year}}</span><br>
                <span>{{payslip?.PayrollUser?.totalGrossSalary}}</span><br>
            </div>
            <div class="col-3">
                <span class="fw-bold" translate>payroll.employee_name</span><br>
                <span class="fw-bold" translate>payroll.designation</span><br>
                <span class="fw-bold" translate>payroll.department</span><br>
            </div>
            <div class="col-3">
                <span>{{payslip?.PayrollUser?.user?.firstName}}&nbsp;{{payslip?.PayrollUser?.user?.lastName}}</span><br>
                <span translate>payroll.designation</span><br>
                <span translate>payroll.department</span><br>
            </div>
        </div>

        <div class="row mb-4">
            <div class="col-12">
                <table class="table">
                    <thead>
                        <tr>
                            <th translate>payroll.earnings</th>
                            <th translate>payroll.amount</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td translate>payroll.fixed_allowance_basic_salary</td>
                            <td>{{payslip?.PayrollUser?.totalFixedAllowance}}</td>
                        </tr>
                        <tr>
                            <td translate>payroll.flexi_benefits</td>
                            <td>{{payslip?.PayrollUser?.totalFlexiBenefits}}</td>
                        </tr>
                    </tbody>
                    <tfoot>
                        <tr class="fw-bold">
                            <td translate>payroll.total_earnings</td>
                            <td>{{ totalEarnings | number:'1.2-2' }}</td>
                        </tr>
                    </tfoot>
                </table>
            </div>
            <div class="col-12">
                <table class="table">
                    <thead>
                        <tr>
                            <th translate>payroll.deductions</th>
                            <th translate>payroll.amount</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td translate>payroll.fixed_deductions</td>
                            <td>{{payslip?.PayrollUser?.totalFixedDeduction}}</td>
                        </tr>
                        <tr>
                            <td translate>payroll.income_tax</td>
                            <td>{{payslip?.tdsCalculated}}</td>
                        </tr>
                        <tr>
                            <td translate>payroll.loan_advances_repayment</td>
                            <td>{{ payslip?.PayrollUser?.totalLoanRepayment || 0 }}</td>
                        </tr>
                    </tbody>
                    <tfoot>
                        <tr class="fw-bold">
                            <td translate>payroll.total_deductions</td>
                            <td>{{ totalDeductions | number:'1.2-2' }}</td>
                        </tr>
                    </tfoot>
                </table>
            </div>

            <div class="col-12">
                <table class="table">
                    <thead>
                        <tr>
                            <th translate>payroll.statutory_deductions</th>
                            <th translate>payroll.amount</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let statutory of payslip?.statutoryDetails">
                            <ng-container *ngIf="statutory?.ContributorType == 'Employee'">
                                <td>{{statutory?.StautoryName}}</td>
                                <td>{{statutory?.amount}}</td>
                            </ng-container>
                        </tr>
                    </tbody>
                    <tfoot>
                        <tr class="fw-bold">
                            <td translate>payroll.employee_statutory_deduction</td>
                            <td>{{ payslip?.PayrollUser?.totalEmployeeStatutoryDeduction | number:'1.2-2' }}</td>
                        </tr>
                    </tfoot>
                </table>
            </div>

            <div class="col-12">
                <table class="table">
                    <thead>
                        <tr>
                            <th translate>payroll.employer_contribution</th>
                            <th translate>payroll.amount</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let statutory of payslip?.statutoryDetails">
                            <ng-container *ngIf="statutory?.ContributorType == 'Employer'">
                                <td>{{statutory?.StautoryName}}</td>
                                <td>{{statutory?.amount}}</td>
                            </ng-container>
                        </tr>
                    </tbody>
                    <tfoot>
                        <tr class="fw-bold">
                            <td translate>payroll.employer_statutory_contribution</td>
                            <td>{{ payslip?.PayrollUser?.totalEmployeeStatutoryContribution | number:'1.2-2' }}</td>
                        </tr>
                    </tfoot>
                </table>
            </div>
        </div>

        <div class="col-12 text-end">
            <h4>
                <span translate>payroll.take_home_salary</span>: â‚¹ {{ payslip?.PayrollUser?.totalTakeHome | number:'1.2-2' }}
            </h4>
        </div>
    </div>
</div>