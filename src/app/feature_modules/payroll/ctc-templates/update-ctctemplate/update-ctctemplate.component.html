<div class="main-content px-2">
  @if(showAssignedTemplates) {
  <form [formGroup]="ctcTemplateForm" class="card mt-3 px-3">
    <div class="row">

      <div class="form-group col-md-6">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Enter the Label for CTC Template</mat-label>
          <input matInput type="text" formControlName="name" placeholder="CTC Template...">
          <mat-error class="mb-3" *ngIf="!ctcTemplateForm.get('name').valid && ctcTemplateForm.get('name').touched">
            <span *ngIf="ctcTemplateForm.get('name').errors?.['required']">{{ 'payroll.name_required' |
              translate }}</span>
            <span *ngIf="ctcTemplateForm.get('name').errors?.['invalidName']">{{ 'payroll.name_invalid' |
              translate }}</span>   
                <span *ngIf="ctcTemplateForm.get('name')?.errors?.['spacesNotAllowed']">      
                    {{ 'payroll.spacenotallowed' | translate }}
                  </span>                                    
          </mat-error>
        </mat-form-field>
      </div>

      <div class="form-group col-md-6">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Fixed Allowances</mat-label>
          <mat-select multiple formControlName="ctcTemplateFixedAllowance"
            (selectionChange)="onDropdownChange($event, 'fixedAllowance')">
            <mat-option *ngFor="let fa of fixedAllowance" [value]="fa?._id">
              {{fa?.label}}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div class="form-group mt-2 col-md-6">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Fixed Deductions</mat-label>
          <mat-select multiple formControlName="ctcTemplateFixedDeduction"
            (selectionChange)="onDropdownChange($event, 'fixedDeduction')">
            <mat-option *ngFor="let fa of fixedDeduction" [value]="fa._id">
              {{fa?.label}}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <div class="form-group mt-2 col-md-6">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Variable Allowance</mat-label>
          <mat-select multiple formControlName="ctcTemplateVariableAllowance"
            (selectionChange)="onDropdownChange($event, 'variableAllowance')">
            <mat-option *ngFor="let va of variableAllowance" [value]="va?._id">
              {{va?.label}}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <div class="form-group mt-2 col-md-6">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Variable Deductions</mat-label>
          <mat-select multiple formControlName="ctcTemplateVariableDeduction"
            (selectionChange)="onDropdownChange($event, 'variableDeduction')">
            <mat-option *ngFor="let vd of variableDeduction" [value]="vd?._id">
              {{vd?.label}}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </div>


    <div class="d-flex mt-2 py-2 justify-content-between">
      <button mat-flat-button type="button" (click)="goBack()">Back</button>
      <button mat-flat-button type="button" color="primary" (click)="onNext()">Proceed</button>
    </div>
  </form>
  }
  @else {
  <app-assigned-templates></app-assigned-templates>
  }
</div>