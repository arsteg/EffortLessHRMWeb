<div class="position-relative">
    <button mat-raised-button color="primary" class="position-absolute end-0"
        (click)="clearselectedRequest(); isEdit=false; open(addModal)">Add New</button>
</div>


<hrm-table [data]="locations" [columns]="columns" [showExport]="'none'" [showSearch]="true"
    (actionClicked)="onActionClick($event)"></hrm-table>

<!-- add location -->
<ng-template #addModal let-modal>
    <div class="modal-header d-flex justify-content-between border-bottom mb-2 pt-0">
        <div>
            <h1 class="modal-title text-muted mb-0">{{isEdit? 'Update': 'Add'}} Location</h1>
        </div>
        <div class=""><button type="button" data-bs-dismiss="modal" class="btn-close text-end"
                (click)="modal.close('Escape clicked')"></button>
        </div>
    </div>

    <form [formGroup]="locationForm" (ngSubmit)="onSubmission()">
        <div class="form-group mt-2">
            <label for="">Location Code <span class="text-danger">*</span></label>
            <input class="form-control" formControlName="locationCode"
                [ngClass]="{'is-invalid': locationForm.get('locationCode').invalid && (locationForm.get('locationCode').dirty || locationForm.get('locationCode').touched)}">
            <div *ngIf="locationForm.get('locationCode').invalid && (locationForm.get('locationCode').dirty || locationForm.get('locationCode').touched)"
                class="invalid-feedback">
                <small class="text-danger">Location Code is required.</small>
            </div>
        </div>
        <div class="form-group mt-2">
            <label for="Select Country">Select Country <span class="text-danger">*</span></label>
            <select formControlName="country"
                [ngClass]="{'is-invalid': locationForm.get('country').invalid && (locationForm.get('country').dirty || locationForm.get('country').touched)}">
                <option [ngValue]="null" disabled>Countries</option>
                <option value="India">India</option>
            </select>
            <div *ngIf="locationForm.get('country').invalid && (locationForm.get('country').dirty || locationForm.get('country').touched)"
                class="invalid-feedback">
                <small class="text-danger">Country is required.</small>
            </div>
        </div>

        <div class="form-group mt-2">
            <label for="Select State">Select State <span class="text-danger">*</span></label>
            <select formControlName="state"
                [ngClass]="{'is-invalid': locationForm.get('state').invalid && (locationForm.get('state').dirty || locationForm.get('state').touched)}">
                <option [ngValue]="null" disabled>States</option>
                <option *ngFor="let state of states" value="{{state}}">{{state}}</option>
            </select>
            <div *ngIf="locationForm.get('state').invalid && (locationForm.get('state').dirty || locationForm.get('state').touched)"
                class="invalid-feedback">
                <small class="text-danger">State is required.</small>
            </div>
        </div>

        <div class="form-group mt-2">
            <label for="Select City">Select City <span class="text-danger">*</span></label>
            <select formControlName="city"
                [ngClass]="{'is-invalid': locationForm.get('city').invalid && (locationForm.get('city').dirty || locationForm.get('city').touched)}">
                <option [ngValue]="null" disabled>Cities</option>
                <option value="city-1">City-1</option>
            </select>
            <div *ngIf="locationForm.get('city').invalid && (locationForm.get('city').dirty || locationForm.get('city').touched)"
                class="invalid-feedback">
                <small class="text-danger">City is required.</small>
            </div>
        </div>

        <div class="form-group mt-2">
            <label for="">Select Organization <span class="text-danger">*</span></label>
            <select formControlName="organization"
                [ngClass]="{'is-invalid': locationForm.get('organization').invalid && (locationForm.get('organization').dirty || locationForm.get('organization').touched)}">
                <option value="Arsteg">Arsteg</option>
            </select>
            <div *ngIf="locationForm.get('organization').invalid && (locationForm.get('organization').dirty || locationForm.get('organization').touched)"
                class="invalid-feedback">
                <small class="text-danger">Organization is required.</small>
            </div>
        </div>

        <div class="form-group mt-2">
            <label for="">Provident Fund Registration Code</label>
            <input type="text" class="form-control" formControlName="providentFundRegistrationCode">
        </div>

        <div class="form-group mt-2">
            <label for="">ESIC Registration Code</label>
            <input type="text" class="form-control" formControlName="esicRegistrationCode">
        </div>

        <div class="form-group mt-2">
            <label for="">Professional Tax Registration Code</label>
            <input type="text" class="form-control" formControlName="professionalTaxRegistrationCode">
        </div>

        <div class="form-group mt-2">
            <label for="">LWF Registration Code</label>
            <input type="text" class="form-control" formControlName="lwfRegistrationCode">
        </div>

        <div class="form-group mt-2">
            <label for="">Select Tax Declaration Approver</label>
            <select name="" id="" formControlName="taxDeclarationApprovers">
                <option value=""></option>
            </select>
        </div>

        <div class="d-flex border-top mt-4 pb-2 pt-4 justify-content-between">
            <button mat-raised-button type="button" (click)="clearselectedRequest()">Cancel</button>
            <button mat-raised-button class="addBtn" type="submit" [disabled]="!locationForm.valid">Submit</button>
        </div>



    </form>

</ng-template>