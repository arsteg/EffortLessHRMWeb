<div class="position-relative">
    <button mat-flat-button 
        class="position-absolute end-0" 
        color="primary" 
        (click)="changeMode='Add'; open(addModal);">
    {{ 'expenses.add_new' | translate }}
    </button>
</div>
<hrm-table 
    [data]="dataSource.data" 
    [isServerSide]="true" 
    [columns]="columns" 
    [showExport]="'none'"
    [showSearch]="true" 
    [totalItems]="totalRecords" 
    (actionClicked)="handleAction($event, addModal)"
    (pageChanged)="onPageChange($event)"
    (sortChanged)="onSortChange($event)"
    (searchChanged)="onSearchChange($event)">
</hrm-table>

<!-- Add/update template  -->
<ng-template #addModal>
    <app-expense-general-settings [changeMode]="changeMode" [selectedTemplate]="selectedTemplate"
        (changeStep)="onChangeStep($event)" (close)="onClose($event)" *ngIf="step == 1"></app-expense-general-settings>
    <app-expense-category-settings *ngIf="step == 2" [selectedTemplate]="selectedTemplate" (close)="onClose($event)" (changeStep)="onChangeStep($event)"
        (updateExpenseTemplateTable)="refreshExpenseTemplateTable()"></app-expense-category-settings>
</ng-template>