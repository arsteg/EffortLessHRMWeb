<div class="position-relative d-none d-md-block">
  <button mat-flat-button color="primary" class="position-absolute end-0" 
    (click)="open(addModal); step=1">
    {{'expenses.add_expense' | translate}}
  </button>
</div>
<div class="d-block d-md-none mt-2">
  <button mat-flat-button color="primary" class="end-0" 
    (click)="open(addModal); step=1">
    {{'expenses.add_expense' | translate}}
  </button>
</div>

<hrm-table 
  [data]="displayedData.data" 
  [isServerSide]="true" 
  [columns]="columns" 
  [showExport]="'csv'" 
  [showSearch]="true" 
  [totalItems]="totalRecords" 
  (actionClicked)="handleAction($event, viewModal, cancelModal)" 
  (pageChanged)="onPageChange($event)" 
  (sortChanged)="onSortChange($event)" 
  (searchChanged)="onSearchChange($event)"
  [pageTitle]="'Expense Report'"
  [mdColumns]="4">
</hrm-table>

<!-- View Only -->
<ng-template #viewModal let-modal>
  <app-view-report (close)="onClose($event)" [report]="selectedReport"></app-view-report>
</ng-template>

<!-- cancel request -->
<ng-template #cancelModal>
  <h2 mat-dialog-title>{{'confirmation' | translate}}</h2>

  <div mat-dialog-content>
    <form [formGroup]="updateExpenseReport" (ngSubmit)="updateCancelledReport()">
      <h4>{{'expenses.cancel_msg' | translate}}</h4>

      <div mat-dialog-actions>
        <button mat-flat-button mat-dialog-close>{{'expenses.no' | translate}}</button>
        <button mat-flat-button color="primary" class="ms-auto" type="submit">{{'expenses.yes' | translate}}</button>
      </div>
    </form>
  </div>
</ng-template>

<ng-template #addModal let-modal>
  <add-expense (changeStep)="onChangeStep($event)" [changeMode]="changeMode" *ngIf="step == 1" (close)="onClose($event)"
    (updateExpenseReportTable)="refreshExpenseReportTable()"></add-expense>
  <app-create-report *ngIf="step == 2" (changeStep)="onChangeStep($event)" [changeMode]="changeMode"
    (close)="onClose($event)" (updateExpenseReportTable)="refreshExpenseReportTable()"></app-create-report>
</ng-template>