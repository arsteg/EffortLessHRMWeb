<div class="px-2">
    <label class="me-auto mt-2">
      {{ selectedUser?.firstName | titlecase }} {{ selectedUser?.lastName | titlecase }} | 
      {{ 'employee.statutory.statutory_details.label' | translate }}
    </label>

  <form [formGroup]="statutoryDetailsForm" (ngSubmit)="onSubmission()">
    <div class="d-flex">
      <button mat-flat-button color="primary" class="ms-auto my-2" type="submit" [disabled]="isSubmitting">
        {{ 'employee.statutory.save' | translate }}
      </button>
    </div>

    <div class="row p-2">
      <!-- Provident Fund Eligibility -->
      <div class="form-group col-md-6 mb-2">
        <label class="small">
          {{ 'employee.statutory.statutory_details.pf_eligible' | translate }} 
          <span class="text-danger">*</span>
        </label>
        <div class="d-flex">
          <mat-radio-group color="primary" formControlName="isEmployeeEligibleForPFDeduction">
            <mat-radio-button [value]="true">
              {{ 'employee.statutory.yes' | translate }}
            </mat-radio-button>
            <mat-radio-button [value]="false" class="ms-3">
              {{ 'employee.statutory.no' | translate }}
            </mat-radio-button>
          </mat-radio-group>
        </div>
        <div *ngIf="statutoryDetailsForm.get('isEmployeeEligibleForPFDeduction')?.invalid && statutoryDetailsForm.get('isEmployeeEligibleForPFDeduction')?.touched && statutoryDetailsForm.get('isEmployeeEligibleForPFDeduction')?.enabled">
          <small class="text-danger" *ngIf="statutoryDetailsForm.get('isEmployeeEligibleForPFDeduction')?.errors?.['required']">
            {{ 'employee.statutory.missing_required_field' | translate }}
          </small>
        </div>
      </div>

      <!-- Employee PF Capped -->
      <div class="form-group col-md-6 mb-2">
        <label class="small">
          {{ 'employee.statutory.statutory_details.pf_capped_employee' | translate }} 
          <span class="text-danger">*</span>
        </label>
        <div class="d-flex">
          <mat-radio-group color="primary" formControlName="isEmployeePFCappedAtPFCeiling">
            <mat-radio-button [value]="true">
              {{ 'employee.statutory.yes' | translate }}
            </mat-radio-button>
            <mat-radio-button [value]="false" class="ms-3">
              {{ 'employee.statutory.no' | translate }}
            </mat-radio-button>
          </mat-radio-group>
        </div>
        <div *ngIf="statutoryDetailsForm.get('isEmployeePFCappedAtPFCeiling')?.invalid && statutoryDetailsForm.get('isEmployeePFCappedAtPFCeiling')?.touched && statutoryDetailsForm.get('isEmployeePFCappedAtPFCeiling')?.enabled">
          <small class="text-danger" *ngIf="statutoryDetailsForm.get('isEmployeePFCappedAtPFCeiling')?.errors?.['required']">
            {{ 'employee.statutory.missing_required_field' | translate }}
          </small>
        </div>
      </div>

      <!-- Employer PF Capped -->
      <div class="form-group col-md-6 mb-2">
        <label class="small">
          {{ 'employee.statutory.statutory_details.pf_capped_employer' | translate }} 
          <span class="text-danger">*</span>
        </label>
        <div class="d-flex">
          <mat-radio-group color="primary" formControlName="isEmployerPFCappedAtPFCeiling">
            <mat-radio-button [value]="true">
              {{ 'employee.statutory.yes' | translate }}
            </mat-radio-button>
            <mat-radio-button [value]="false" class="ms-3">
              {{ 'employee.statutory.no' | translate }}
            </mat-radio-button>
          </mat-radio-group>
        </div>
        <div *ngIf="statutoryDetailsForm.get('isEmployerPFCappedAtPFCeiling')?.invalid && statutoryDetailsForm.get('isEmployerPFCappedAtPFCeiling')?.touched && statutoryDetailsForm.get('isEmployerPFCappedAtPFCeiling')?.enabled">
          <small class="text-danger" *ngIf="statutoryDetailsForm.get('isEmployerPFCappedAtPFCeiling')?.errors?.['required']">
            {{ 'employee.statutory.missing_required_field' | translate }}
          </small>
        </div>
      </div>

      <!-- Provident Fund Joining Date -->
      <div class="form-group col-md-6 mb-2">
        <mat-form-field class="w-100">
          <mat-label>{{ 'employee.statutory.statutory_details.pf_joining_date' | translate }}</mat-label>
          <input matInput placeholder="YYYY-MM-DD" formControlName="providentFundJoiningDate" [matDatepicker]="pfJoiningDatePicker">
          <mat-datepicker-toggle matSuffix [for]="pfJoiningDatePicker"></mat-datepicker-toggle>
          <mat-datepicker #pfJoiningDatePicker></mat-datepicker>
        </mat-form-field>
      </div>

      <!-- Provident Fund Number -->
      <div class="form-group col-md-6 mb-2">
        <mat-form-field class="w-100">
          <mat-label>{{ 'employee.statutory.statutory_details.pf_number' | translate }}</mat-label>
          <input matInput type="text" placeholder="{{ 'employee.statutory.statutory_details.pf_number_placeholder' | translate }}" formControlName="providentFundNumber" maxlength="22">
          <mat-error *ngIf="statutoryDetailsForm.get('providentFundNumber')?.invalid && (statutoryDetailsForm.get('providentFundNumber')?.dirty || statutoryDetailsForm.get('providentFundNumber')?.touched)">
            <span *ngIf="statutoryDetailsForm.get('providentFundNumber')?.errors?.['pattern']">
              {{ 'employee.statutory.statutory_details.invalid_pf_number' | translate }}
            </span>
          </mat-error>
        </mat-form-field>
      </div>

      <!-- UAN Number -->
      <div class="form-group col-md-6 mb-2">
        <mat-form-field class="w-100">
          <mat-label>{{ 'employee.statutory.statutory_details.uan_number' | translate }}</mat-label>
          <input matInput type="text" placeholder="{{ 'employee.statutory.statutory_details.uan_number_placeholder' | translate }}" formControlName="UANNumber" maxlength="12">
          <mat-error *ngIf="statutoryDetailsForm.get('UANNumber')?.invalid && (statutoryDetailsForm.get('UANNumber')?.dirty || statutoryDetailsForm.get('UANNumber')?.touched)">
            <span *ngIf="statutoryDetailsForm.get('UANNumber')?.errors?.['pattern']">
              {{ 'employee.statutory.statutory_details.invalid_uan_number' | translate }}
            </span>
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Fixed PF Wage -->
      <div class="form-group col-md-12 mb-2">
        <mat-form-field class="w-100">
          <mat-label>{{ 'employee.statutory.statutory_details.fixed_pf_wage' | translate }}</mat-label>
          <input matInput type="text" placeholder="{{ 'employee.statutory.statutory_details.fixed_pf_wage_placeholder' | translate }}" formControlName="fixedAmountForYourProvidentFundWage">
          <mat-error *ngIf="statutoryDetailsForm.get('fixedAmountForYourProvidentFundWage')?.invalid && (statutoryDetailsForm.get('fixedAmountForYourProvidentFundWage')?.dirty || statutoryDetailsForm.get('fixedAmountForYourProvidentFundWage')?.touched)">
            <span *ngIf="statutoryDetailsForm.get('fixedAmountForYourProvidentFundWage')?.errors?.['pattern']">
              {{ 'employee.statutory.statutory_details.invalid_amount' | translate }}
            </span>
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Additional PF Contribution -->
      <div class="form-group col-md-12 mb-2">
        <mat-form-field class="w-100">
          <mat-label>{{ 'employee.statutory.statutory_details.additional_pf_contribution' | translate }}</mat-label>
          <input matInput type="text" placeholder="{{ 'employee.statutory.statutory_details.additional_pf_contribution_placeholder' | translate }}" formControlName="additionalPFContributionInPercentage" maxlength="5"> 
          <mat-error *ngIf="statutoryDetailsForm.get('additionalPFContributionInPercentage')?.invalid && (statutoryDetailsForm.get('additionalPFContributionInPercentage')?.dirty || statutoryDetailsForm.get('additionalPFContributionInPercentage')?.touched)">
            <span *ngIf="statutoryDetailsForm.get('additionalPFContributionInPercentage')?.errors?.['pattern']">
              {{ 'employee.statutory.statutory_details.invalid_percentage' | translate }}
            </span>
          </mat-error>
        </mat-form-field>
      </div>

      <!-- ESIC Deduction -->
      <div class="form-group col-md-6 mb-2">
        <label class="small">
          {{ 'employee.statutory.statutory_details.esic_deduction' | translate }} 
          <span class="text-danger">*</span>
        </label>        
        <div class="d-flex">
          <mat-radio-group color="primary" formControlName="isESICDeductedFromSalary">
            <mat-radio-button [value]="true">
              {{ 'employee.statutory.yes' | translate }}
            </mat-radio-button>
            <mat-radio-button [value]="false" class="ms-3">
              {{ 'employee.statutory.no' | translate }}
            </mat-radio-button>
          </mat-radio-group>
        </div> 
        <div *ngIf="statutoryDetailsForm.get('isESICDeductedFromSalary')?.invalid && statutoryDetailsForm.get('isESICDeductedFromSalary')?.touched && statutoryDetailsForm.get('isESICDeductedFromSalary')?.enabled">
          <small class="text-danger" *ngIf="statutoryDetailsForm.get('isESICDeductedFromSalary')?.errors?.['required']">
            {{ 'employee.statutory.missing_required_field' | translate }}
          </small>
        </div>
      </div>

      <!-- ESIC Number -->
      <div class="form-group col-md-6 mb-2">
        <mat-form-field class="w-100">
          <mat-label>{{ 'employee.statutory.statutory_details.esic_number' | translate }}</mat-label>
          <input matInput type="text" placeholder="{{ 'employee.statutory.statutory_details.esic_number_placeholder' | translate }}" formControlName="ESICNumber" maxlength="17">
          <mat-error *ngIf="statutoryDetailsForm.get('ESICNumber')?.invalid && (statutoryDetailsForm.get('ESICNumber')?.dirty || statutoryDetailsForm.get('ESICNumber')?.touched)">
            <span *ngIf="statutoryDetailsForm.get('ESICNumber')?.errors?.['pattern']">
              {{ 'employee.statutory.statutory_details.invalid_esic_number' | translate }}
            </span>
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Professional Tax -->
      <div class="form-group col-md-6 mb-2">        
        <label class="small">
          {{ 'employee.statutory.statutory_details.professional_tax' | translate }} 
          <span class="text-danger">*</span>
        </label>
        <div class="d-flex">
          <mat-radio-group color="primary" formControlName="isTaxDeductedFromPlayslip">
            <mat-radio-button [value]="true">
              {{ 'employee.statutory.yes' | translate }}
            </mat-radio-button>
            <mat-radio-button [value]="false" class="ms-3">
              {{ 'employee.statutory.no' | translate }}
            </mat-radio-button>
          </mat-radio-group>
        </div>
        <div *ngIf="statutoryDetailsForm.get('isTaxDeductedFromPlayslip')?.invalid && statutoryDetailsForm.get('isTaxDeductedFromPlayslip')?.touched && statutoryDetailsForm.get('isTaxDeductedFromPlayslip')?.enabled">
          <small class="text-danger" *ngIf="statutoryDetailsForm.get('isTaxDeductedFromPlayslip')?.errors?.['required']">
            {{ 'employee.statutory.missing_required_field' | translate }}
          </small>
        </div>
      </div>

      <!-- LWF Deduction -->
      <div class="form-group col-md-6 mb-2">
        <label class="small">
          {{ 'employee.statutory.statutory_details.lwf_deduction' | translate }} 
          <span class="text-danger">*</span>
        </label>
        <div class="d-flex">
          <mat-radio-group color="primary" formControlName="isLWFDeductedFromPlayslip">
            <mat-radio-button [value]="true">
              {{ 'employee.statutory.yes' | translate }}
            </mat-radio-button>
            <mat-radio-button [value]="false" class="ms-3">
              {{ 'employee.statutory.no' | translate }}
            </mat-radio-button>
          </mat-radio-group>
        </div>
        <div *ngIf="statutoryDetailsForm.get('isLWFDeductedFromPlayslip')?.invalid && statutoryDetailsForm.get('isLWFDeductedFromPlayslip')?.touched && statutoryDetailsForm.get('isLWFDeductedFromPlayslip')?.enabled">
          <small class="text-danger" *ngIf="statutoryDetailsForm.get('isLWFDeductedFromPlayslip')?.errors?.['required']">
            {{ 'employee.statutory.missing_required_field' | translate }}
          </small>
        </div>
      </div>

      <!-- Income Tax Deduction -->
      <div class="form-group col-md-6 mb-2">
        <label class="small">
          {{ 'employee.statutory.statutory_details.income_tax_deduction' | translate }} 
          <span class="text-danger">*</span>
        </label>
        <div class="d-flex">
          <mat-radio-group color="primary" formControlName="isIncomeTaxDeducted">
            <mat-radio-button [value]="true">
              {{ 'employee.statutory.yes' | translate }}
            </mat-radio-button>
            <mat-radio-button [value]="false" class="ms-3">
              {{ 'employee.statutory.no' | translate }}
            </mat-radio-button>
          </mat-radio-group>
        </div>
        <div *ngIf="statutoryDetailsForm.get('isIncomeTaxDeducted')?.invalid && statutoryDetailsForm.get('isIncomeTaxDeducted')?.touched && statutoryDetailsForm.get('isIncomeTaxDeducted')?.enabled">
          <small class="text-danger" *ngIf="statutoryDetailsForm.get('isIncomeTaxDeducted')?.errors?.['required']">
            {{ 'employee.statutory.missing_required_field' | translate }}
          </small>
        </div>
      </div>

      <!-- Gratuity Eligibility -->
      <div class="form-group col-md-6 mb-2">
        <label class="small">
          {{ 'employee.statutory.statutory_details.gratuity_eligible' | translate }} 
          <span class="text-danger">*</span>
        </label>
        <div class="d-flex">
          <mat-radio-group color="primary" formControlName="isGratuityEligible">
            <mat-radio-button [value]="true">
              {{ 'employee.statutory.yes' | translate }}
            </mat-radio-button>
            <mat-radio-button [value]="false" class="ms-3">
              {{ 'employee.statutory.no' | translate }}
            </mat-radio-button>
          </mat-radio-group>
        </div>
        <div *ngIf="statutoryDetailsForm.get('isGratuityEligible')?.invalid && statutoryDetailsForm.get('isGratuityEligible')?.touched && statutoryDetailsForm.get('isGratuityEligible')?.enabled">
          <small class="text-danger" *ngIf="statutoryDetailsForm.get('isGratuityEligible')?.errors?.['required']">
            {{ 'employee.statutory.missing_required_field' | translate }}
          </small>
          <small class="text-danger" *ngIf="statutoryDetailsForm.get('isGratuityEligible')?.errors?.['generalSettingRestricted']">
            {{ 'employee.statutory.statutory_details.gratuity_restricted' | translate }}
          </small>
          <small class="text-danger" *ngIf="statutoryDetailsForm.get('isGratuityEligible')?.errors?.['notCompletedFiveYears']">
            {{ 'employee.statutory.statutory_details.gratuity_five_years' | translate }}
          </small>
        </div>
      </div>

      <!-- Gratuity Act -->
      <div class="form-group col-md-6 mb-2">
        <label class="small">
          {{ 'employee.statutory.statutory_details.gratuity_act' | translate }} 
          <span class="text-danger">*</span>
        </label>
        <div class="d-flex">
          <mat-radio-group color="primary" formControlName="isComeUnderGratuityPaymentAct">
            <mat-radio-button [value]="true">
              {{ 'employee.statutory.yes' | translate }}
            </mat-radio-button>
            <mat-radio-button [value]="false" class="ms-3">
              {{ 'employee.statutory.no' | translate }}
            </mat-radio-button>
          </mat-radio-group>
        </div>
        <div *ngIf="statutoryDetailsForm.get('isComeUnderGratuityPaymentAct')?.invalid && statutoryDetailsForm.get('isComeUnderGratuityPaymentAct')?.touched && statutoryDetailsForm.get('isComeUnderGratuityPaymentAct')?.enabled">
          <small class="text-danger" *ngIf="statutoryDetailsForm.get('isComeUnderGratuityPaymentAct')?.errors?.['required']">
            {{ 'employee.statutory.missing_required_field' | translate }}
          </small>
        </div>
      </div>

      <!-- Tax Regime -->
      <div class="form-group col-md-6 mb-2">
        <mat-form-field class="w-100">
          <mat-label>{{ 'employee.statutory.statutory_details.tax_regime' | translate }}</mat-label>
          <mat-select formControlName="taxRegime">
            <mat-option value="" disabled>
              {{ 'employee.statutory.statutory_details.tax_regime_placeholder' | translate }}
            </mat-option>
            <mat-option value="Old Regime">
              {{ 'employee.statutory.statutory_details.tax_regime_old' | translate }}
            </mat-option>
            <mat-option value="New Regime">
              {{ 'employee.statutory.statutory_details.tax_regime_new' | translate }}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="statutoryDetailsForm.get('taxRegime')?.invalid && statutoryDetailsForm.get('taxRegime')?.touched && statutoryDetailsForm.get('taxRegime')?.enabled">
            <span *ngIf="statutoryDetailsForm.get('taxRegime')?.errors?.['required']">
              {{ 'employee.statutory.missing_required_field' | translate }}
            </span>
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Tax Regime Updated -->
      <div class="form-group col-md-6 mb-2">
        <mat-form-field class="w-100">
          <mat-label>{{ 'employee.statutory.statutory_details.tax_regime_updated' | translate }}</mat-label>
          <input matInput placeholder="YYYY-MM-DD" formControlName="taxRegimeUpdated" [matDatepicker]="taxRegimeDatePicker">
          <mat-datepicker-toggle matSuffix [for]="taxRegimeDatePicker"></mat-datepicker-toggle>
          <mat-datepicker #taxRegimeDatePicker></mat-datepicker>
        </mat-form-field>
      </div>

      <!-- Round Off -->
      <div class="form-group col-md-6 mb-2">
        <label class="small">
          {{ 'employee.statutory.statutory_details.round_off' | translate }} 
          <span class="text-danger">*</span>
        </label>
        <div class="d-flex">
          <mat-radio-group color="primary" formControlName="roundOffApplicable">
            <mat-radio-button [value]="true">
              {{ 'employee.statutory.yes' | translate }}
            </mat-radio-button>
            <mat-radio-button [value]="false" class="ms-3">
              {{ 'employee.statutory.no' | translate }}
            </mat-radio-button>
          </mat-radio-group>
        </div>
        <div *ngIf="statutoryDetailsForm.get('roundOffApplicable')?.invalid && statutoryDetailsForm.get('roundOffApplicable')?.touched && statutoryDetailsForm.get('roundOffApplicable')?.enabled">
          <small class="text-danger" *ngIf="statutoryDetailsForm.get('roundOffApplicable')?.errors?.['required']">
            {{ 'employee.statutory.missing_required_field' | translate }}
          </small>
        </div>
      </div>

      <!-- Overtime Eligibility -->
      <div class="form-group col-md-6 mb-2">
        <label class="small">
          {{ 'employee.statutory.statutory_details.overtime_eligible' | translate }} 
          <span class="text-danger">*</span>
        </label>
        <div class="d-flex">
          <mat-radio-group color="primary" formControlName="eligibleForOvertime">
            <mat-radio-button [value]="true">
              {{ 'employee.statutory.yes' | translate }}
            </mat-radio-button>
            <mat-radio-button [value]="false" class="ms-3">
              {{ 'employee.statutory.no' | translate }}
            </mat-radio-button>
          </mat-radio-group>
        </div>
        <div *ngIf="statutoryDetailsForm.get('eligibleForOvertime')?.invalid && statutoryDetailsForm.get('eligibleForOvertime')?.touched && statutoryDetailsForm.get('eligibleForOvertime')?.enabled">
          <small class="text-danger" *ngIf="statutoryDetailsForm.get('eligibleForOvertime')?.errors?.['required']">
            {{ 'employee.statutory.missing_required_field' | translate }}
          </small>
        </div>
      </div>
    </div>
  </form>
</div>