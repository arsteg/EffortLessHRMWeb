<div class="main-content">
    <div class="container-fluid">
        <div class="d-flex justify-content-between">
            <h1 class="pt-0 pb-3 mb-0">Productivity</h1>
            <div class="pt-2">
                <button class="buttons" (click)="toggleSingleMember()"  [ngClass]="{'active': activeButton === 'Single'}">Per Member</button>
                <button class="buttons mx-3"  (click)="toggleAllMembers()"  [ngClass]="{'active': activeButton === 'Members'}">All Members</button>
            </div>
            <div class=" pt-1 d-flex text-center mx-1 h-0">
                <mat-form-field appearance="outline" class="w-100 mx-1">
                    <mat-label>Select User</mat-label>
                    <mat-select multiple [(ngModel)]="selectedUser">
                        <mat-option *ngFor="let member of members" [value]="member.id" (click)="filterData()"
                            [selected]="selectedUser?.includes(member?.id)">
                            {{member.name | titlecase}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
               

                <div class="mx-1 pt-3">
                    <i class="fa fa-calendar text-primary"></i>
                </div>
                <input type="date" name="fromDate" id="fromDate" (change)="filterData()" [(ngModel)]="fromDate"
                    class="form-control calendar mb-4 mx-1" />
                <div class="mx-1 pt-3">
                    <i class="fa fa-long-arrow-right text-primary"></i>
                </div>
                <input type="date" name="toDate" id="toDate" (change)="filterData()" [(ngModel)]="toDate"
                    class="form-control calendar mb-4 mx-1" />
            </div>
        </div>
        <hr class="mt-0">
        <div class="container-fluid" *ngIf="showSingleMember">
            <div class="row">
                <div class="col-md-6 col-lg-6">
                    <div class="card">
                        <div class="card-body p-4">
                            <div class="d-flex text-black">
                                <div class="flex-shrink-0 pt-3">
                                   </div>
                                <div class="flex-grow-1 ms-3">
                                    <h5 class="mb-1">{{ productivity[0]?.firstName | titlecase}} {{productivity[0]?.lastName | titlecase}}</h5>
                                    <h5 class="mb-1">Member since: {{ productivity[0]?.dateOfJoining | date:'MMM dd, yyyy' }}
                                    </h5>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-lg-6">
                    <div class="card bg-light">
                        <div class="col-md-12 col-xl-12 card-body p-4">
                            <div class="d-flex text-black">
                                <div class="flex-shrink-0">
                                    <div><b>Tracked: {{minutesToTime(productivity[0]?.total) }}</b></div>
                                    <div>Idle: {{ minutesToTime(productivity[0]?.inactive) }}</div>
                                </div>
                                <div class="flex-grow-1 ms-5">
                                    <h5 class="mb-1">AVG mouse/minute: {{ productivity[0]?.mouseClicks}}</h5>
                                    <h5 class="mb-1">AVG keyboard/minute: {{ productivity[0]?.keyboardStrokes}}</h5>
                                </div>
                                <div class="flex-grow-1 ms-5">
                                    <h5 class="mb-1">AVG scroll/minute: {{ productivity[0]?.scrollingNumber }}</h5>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row p-5 mt-2 bg-white">
                <h4>App & Web Usage</h4>
                <hr>
                <div class="progress">
                    <div class="progress-bar" role="progressbar" style="width: 100%" aria-valuenow="100"
                        aria-valuemin="0" aria-valuemax="100"></div>
                </div>
                <div class="d-flex justify-content-evenly">
                    <div>
                        Productive<br />
                        Team AVG 0%
                    </div>
                    <div>
                        Neutral <br />
                        Team AVG 100%
                    </div>
                    <div>
                        Non-productive <br />
                        Team AVG 0%
                    </div>
                </div>
               
            </div>
            <div class="row bg-white p-5 mt-2">
                <div class="d-flex justify-content-between pt-4">
                    <h1 class="pt-0 pb-3 mb-0">Active Minutes</h1>
                    <h1 class="pt-0 pb-3 mb-0">Score: 80/100</h1>
                </div>
                <div>
                    <div class="progress" style="height: 30px;">
                        <div class="progress-bar bg-success" role="progressbar" style="width: 80%" aria-valuemax="100">
                            80%</div>
                        <div class="progress-bar bg-danger" role="progressbar" style="width: 20%" aria-valuemax="100">
                            20%</div>
                    </div>
                </div>
                <div class="d-flex justify-content-between pt-4">

                    <div>{{minutesToTime(productivity[0]?.total) }}<br />Tracked</div>
                    <div>{{minutesToTime(productivity[0]?.TimeSpent) }}<br />Active</div>
                    <div>{{ minutesToTime(productivity[0]?.inactive) }}<br />Inactive</div>
                </div>
                <div class="d-flex justify-content-center pt-4">
                    Team AVG active minutes: 80%
                </div>
            </div>
        </div>
        <div class="container-fluid" *ngIf="showAllMembers">
            <table class="table  mt-4" id="timeSheet" #timeSheet>
                <thead>
                    <tr>
                        <th scope="col" [appSort]="" data-order="{{ sortOrder }}" data-name="firstName"
                            (click)="sortOrder = (sortOrder === 'asc' ? 'desc' : 'asc')">
                            Users &nbsp;
                            <i [class]="sortOrder === 'asc' ? 'bi bi-arrow-up sort-asc' : 'bi bi-arrow-down sort-desc'"></i>
                        </th>
    
                        <th scope="col" [appSort]="" data-order="{{ sortOrder }}" data-name="firstName"
                            (click)="sortOrder = (sortOrder === 'asc' ? 'desc' : 'asc')">
                            Tracked Time &nbsp;
                            <i [class]="sortOrder === 'asc' ? 'bi bi-arrow-up sort-asc' : 'bi bi-arrow-down sort-desc'"></i>
                        </th>
                        <th scope="col" [appSort]="" data-order="{{ sortOrder }}" data-name=""
                            (click)="sortOrder = (sortOrder === 'asc' ? 'desc' : 'asc')">
                           AVG Mouse&nbsp;
                            <i [class]="sortOrder === 'asc' ? 'bi bi-arrow-up sort-asc' : 'bi bi-arrow-down sort-desc'"></i>
                        </th>
                        <th scope="col" [appSort]="" data-order="{{ sortOrder }}" data-name=""
                            (click)="sortOrder = (sortOrder === 'asc' ? 'desc' : 'asc')">
                            AVG KeyPressed &nbsp;
                            <i [class]="sortOrder === 'asc' ? 'bi bi-arrow-up sort-asc' : 'bi bi-arrow-down sort-desc'"></i>
                        </th>
                        <th scope="col" [appSort]="" data-order="{{ sortOrder }}" data-name=""
                            (click)="sortOrder = (sortOrder === 'asc' ? 'desc' : 'asc')">
                            Productive &nbsp;
                            <i [class]="sortOrder === 'asc' ? 'bi bi-arrow-up sort-asc' : 'bi bi-arrow-down sort-desc'"></i>
                        </th>
                        <th scope="col" [appSort]="" data-order="{{ sortOrder }}" data-name=""
                            (click)="sortOrder = (sortOrder === 'asc' ? 'desc' : 'asc')">
                            Non-Productive &nbsp;
                            <i [class]="sortOrder === 'asc' ? 'bi bi-arrow-up sort-asc' : 'bi bi-arrow-down sort-desc'"></i>
                        </th>
                       
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let data of productivity">
                        <td>{{data.firstName}} {{data.lastName}}</td>
                        <td>{{minutesToTime(data?.TimeSpent) }}</td>
                        <td>{{ data?.mouseClicks }}</td>
                        <td>{{ data?.keyboardStrokes}}</td>
                        <td>{{(data?.timeSpentProductive / data?.TimeSpent) * 100 | number: '1.2-2'}} %</td>
                        <td>{{(data?.timeSpentNonProductive / data?.TimeSpent) * 100 | number: '1.2-2'}} %</td>
                    </tr>
                   
                </tbody>
            </table>
        </div>
    </div>
</div>